<div id="map" data-markers="<%= @markers.to_json %>" data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
</div>
<!--map-->
<% content_for :after_js do %>
  <%= javascript_pack_tag 'map' %>
<% end %>


</div class="container">
  <% @events.each do |event| %>
  <div class="card">
    <h3><%= @sport&.name %></h3>
    <p><%= event&.address %></p>
    <p><%= event&.date&.strftime('%b %e, %l:%M %p')%></p>

    <p>Available spots: <%=event&.available_slots%>/<%= event&.capacity%></p>
    <% if event.full? %>
      <button type="button" class="btn" disabled>Full</button>
    <%else%>
      <p><%= button_to 'Join', { action: "create", controller: "bookings", params: { booking: {event_id: event.id,  user_id: current_user.id}}}, class: ' join active sign-in btn' %>
    <%end%>
  </div>
  <% end %>
</div>



